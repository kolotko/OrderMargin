@page "/"
@using Dto
@using Radzen
@using Radzen.Blazor
@using OrderMarginApp.Components.Order
@inject DialogService DialogService

<RadzenSteps CanChange="@CanChange">
    <Steps >
        <RadzenStepsItem Text="Kalkulator cen">
            <PriceCalculatorComponent PriceCalculatorReady="@PriceCalculatorReadyEvent"></PriceCalculatorComponent>
        </RadzenStepsItem>
        <RadzenStepsItem Text="Marżowość">
            <OrderFileComponent OrderFileReady="@OrderFileReadyEvent"></OrderFileComponent>
        </RadzenStepsItem>
       
    </Steps>
</RadzenSteps>

@code {
    private List<PriceCalculatorDto>? _prices;
    private List<OrderFileDto>? _orders;
    private void PriceCalculatorReadyEvent(List<PriceCalculatorDto> result)
    {
        _prices = result;
    }
    
    private void OrderFileReadyEvent(List<OrderFileDto> result)
    {
        _orders = result;
    }
    
    private async Task CanChange(StepsCanChangeEventArgs args)
    {
        // przejście do kroku drugiego tylko jeśli są sku które można wykluczyć
        await Task.CompletedTask;
        args.PreventDefault();
        return;
        //
        // var response = await DialogService.Confirm(
        //     "Are you sure you want to continue without saving?",
        //     "Confirm",
        //     new ConfirmOptions()
        //     {
        //         CloseDialogOnEsc = false,
        //         CloseDialogOnOverlayClick = false,
        //         ShowClose = false,
        //         CancelButtonText = "No",
        //         OkButtonText = "Yes",
        //     });
        //
        // if (response == false)
        // {
        //     args.PreventDefault();
        // }
    }
}